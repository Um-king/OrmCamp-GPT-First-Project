<!DOCTYPE html>
<html>
<head>
    <title>동적 여행 계획과 지도 마커</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <style>
        #map { height: 400px; }
        .itinerary { margin-top: 20px; }
        .details { display: none; }
    </style>
</head>
<body>

<div id="map"></div>
<div id="itinerary"></div>

<script>
// 예제 여행 계획 데이터
var travelPlans = [
    { date: "3월 1일", location: [51.5, -0.09], morning: "공원 방문", afternoon: "박물관 투어" },
    { date: "3월 2일", location: [51.515, -0.1], morning: "해변 산책", afternoon: "로컬 시장 구경" },
    // 추가 여행 계획 데이터...
];

var map = L.map('map').setView([51.505, -0.09], 13);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);

// 여행 계획을 동적으로 생성하고 지도에 마커 추가
travelPlans.forEach(function(plan, index) {
    var itinerary = document.getElementById('itinerary');
    var dayDiv = document.createElement('div');
    dayDiv.className = 'day';
    dayDiv.innerHTML = `<h3 onclick="toggleDetails('details${index}')">${plan.date}</h3>
                        <div id="details${index}" class="details">
                            <p>오전 계획: ${plan.morning}</p>
                            <p>오후 계획: ${plan.afternoon}</p>
                        </div>`;
    itinerary.appendChild(dayDiv);

    var marker = L.marker(plan.location).addTo(map).on('click', function() {
        toggleDetails('details' + index);
        document.getElementById('details' + index).scrollIntoView({behavior: 'smooth'});
    });
});

// 세부 정보 토글 함수
function toggleDetails(detailsId) {
    var details = document.getElementById(detailsId);
    details.style.display = details.style.display === 'none' ? 'block' : 'none';
}
</script>

</body>
</html>
